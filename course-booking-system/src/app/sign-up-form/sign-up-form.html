<h2>Sign up for a course!</h2>

<form [formGroup]="signUpForm" (ngSubmit)="onSubmit()">
  <div class="form-group">
    <label for="name">Name:</label>
    <input id="name" type="text" formControlName="name" />
    @if (signUpForm.get('name')?.invalid && signUpForm.get('name')?.touched) {
    <div class="error">Name is required.</div>
    <div class="error">Name must be at least 5 characters long.</div>
    }
  </div>
  <div class="form-group">
    <label for="email">Email:</label>
    <input id="email" type="email" formControlName="email" />
    @if (signUpForm.get('email')?.invalid && signUpForm.get('email')?.touched) {
    <div class="error">Valid email is required.</div>
    }
  </div>
  <div class="form-group">
    <label for="name">Enroll in:</label>
    <select id="enrolledCourseId" formControlName="enrolledCourseId">
      <option value="" disabled>Select a course</option>
      @for(course of courses; track course.id) {
      <option [value]="course.id">
        {{ course.title }}
      </option>
      }
    </select>
  </div>
  <button [disabled]="signUpForm.invalid" type="submit">Sign up</button>
  @if (submissionSuccessful) {
  <div class="success-message">
    You have successfully signed up for the course!
  </div>
  }
  @if (submissionError) {
  <div class="error-message">
    An error occurred while submitting the form. Please try again.
  </div>
  }
</form>
